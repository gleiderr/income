(this.webpackJsonpincome=this.webpackJsonpincome||[]).push([[0],{18:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(4),r=n.n(a);function o(){r.a.initializeApp({apiKey:"AIzaSyCI77PrVU6FyFQN9OQhF8uo2ypHZQTQqSM",authDomain:"gleider-dev.firebaseapp.com",databaseURL:"https://gleider-dev.firebaseio.com",projectId:"gleider-dev",storageBucket:"",messagingSenderId:"868861057308",appId:"1:868861057308:web:72ab5d4b1e875ce7"})}},29:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(){var e=function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))};e(),window.addEventListener("resize",function(e){var t=!1;return function(){t||(t=setTimeout((function(){e(),t=!1}),15))}}(e))}},30:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(1),r=n.n(a),o=n(4),i=n.n(o),c=n(10),u=n(9),s=n.n(u),l=n(20),d=n.n(l),m=n(31);function f(e){var t=e.user,n=e.sign_in,a=e.open_sign_in,o=e.hideChat,u=r.a.createElement(c.Button,{id:"fab-docs",onClick:function(){return o()},style:{margin:"auto 8px auto auto",marginLeft:"auto",background:"var(--mdc-theme-secondary)",color:"var(--mdc-theme-on-secondary)",borderColor:"var(--mdc-theme-on-primary, #ffffff)"},icon:r.a.createElement(s.a,{icon:"description"})},"Documenta\xe7\xe3o"),f={color:"var(--mdc-theme-on-primary, #ffffff)",borderColor:"var(--mdc-theme-on-primary, #ffffff)",margin:"auto 8px"},p=t?r.a.createElement(c.Button,{outlined:!0,style:f,onClick:function(){return i.a.auth().signOut()}},"Desconectar"):r.a.createElement(c.Button,{outlined:!0,style:f,onClick:function(){return a(!n)},trailingIcon:r.a.createElement(s.a,{icon:n?"arrow_drop_up":"arrow_drop_down"})},n?"Cancelar":"Conectar");return r.a.createElement(d.a,{style:{position:"static"}},r.a.createElement(l.TopAppBarRow,null,p,u),n&&!t?r.a.createElement(m.a,{user:t}):null)}},31:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return s}));var a=n(1),r=n.n(a),o=n(4),i=n.n(o),c=n(18);n(32);try{i.a.app()}catch(l){Object(c.a)()}var u={signInFlow:"popup",credentialHelper:e.firebaseui.auth.CredentialHelper.NONE,signInOptions:[i.a.auth.GoogleAuthProvider.PROVIDER_ID,{provider:i.a.auth.EmailAuthProvider.PROVIDER_ID,requireDisplayName:!0}],callbacks:{signInSuccessWithAuthResult:function(){return!1}}};function s(t){t.user;return Object(a.useEffect)((function(){var t=e.firebaseui.auth.AuthUI;(t.getInstance()||new t(i.a.auth())).start("#firebaseui-auth-container",u)})),r.a.createElement("div",{style:{background:"var(--mdc-theme-primary)",alignSelf:"center"}},"Conecte-se para enviar mensagens",r.a.createElement("div",{id:"firebaseui-auth-container"}))}}).call(this,n(12))},35:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(7),r=n(1),o=n.n(r),i=n(36),c=n.n(i),u=n(37),s=n.n(u),l=n(10),d=n.n(l);function m(e){var t=e.inventionListener,n=e.inventionSave,i=e.showHeader,c=Object(r.useState)(!0),u=Object(a.a)(c,2),l=u[0],m=u[1],g=Object(r.useState)(""),v=Object(a.a)(g,2),h=v[0],b=v[1],y=Object(r.useState)(""),E=Object(a.a)(y,2),O=E[0],w=E[1];Object(r.useEffect)((function(){return t(b)}),[t,b]);var j=i?o.a.createElement("div",{style:{display:"flex",padding:"8px"}},o.a.createElement("label",{htmlFor:"my-switch",style:{marginRight:"12px"}},"Visualizar"),o.a.createElement(s.a,{checked:l,nativeControlId:"my-switch","data-testid":"switch",onChange:function(e){return m(e.target.checked)}}),o.a.createElement(d.a,{"data-testid":"save-button",className:O,raised:!0,style:{marginLeft:"auto"},onClick:function(){w("waiting"),n(h).then((function(){return w("")}))}},"Salvar")):null;return o.a.createElement(o.a.Fragment,null,j,o.a.createElement("div",{style:{flexGrow:1,overflow:"auto",padding:"8px"}},l?o.a.createElement(p,{markdown:h}):o.a.createElement(f,{markdown:h,setMarkdown:b})))}function f(e){var t=e.markdown,n=e.setMarkdown,a=Object(r.useRef)(null);return o.a.createElement("div",{contentEditable:!0,suppressContentEditableWarning:!0,ref:a,"data-testid":"markdown",onBlur:function(e){return n(e.target.innerText)},style:{whiteSpace:"pre-wrap",WebkitUserModify:"read-write",overflowWrap:"break-word",lineBreak:"after-white-space",lineHeight:"1em",fontFamily:"monospace",display:"inline-block"}},t)}function p(e){var t=e.markdown,n=new c.a.Converter({strikethrough:!0});n.setFlavor("github");var a=n.makeHtml(t);return o.a.createElement("div",{className:"income-doc","data-testid":"view",dangerouslySetInnerHTML:{__html:a}})}},38:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(7),r=n(1),o=n.n(r),i=(n(10),n(9)),c=n.n(i),u=n(15),s=n(21),l=n.n(s),d=n(22),m=n.n(d);function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.sendMsg,n=e.msgsListener,i=e.autor,s=Object(r.useState)(""),l=Object(a.a)(s,2),f=l[0],g=l[1],v=Object(r.useState)(!0),h=Object(a.a)(v,2),b=h[0],y=h[1],E=Object(r.useRef)(null),O=function(e){g(e),Promise.resolve().then((function(){E.current.inputElement.style.height="auto"})).then((function(){var e=E.current.inputElement;e.style.height=e.scrollHeight+"px"}))},w=Object(r.useState)([]),j=Object(a.a)(w,2),x=j[0],k=j[1];Object(r.useEffect)((function(){return n(k)}),[n,k]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(p,Object.assign({key:""},{msgList:x,autoScroll:b,setAutoScroll:y})),o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(m.a,{id:"MessageInput",className:"MessageInput",label:"Sua mensagem",outlined:!0,textarea:!0,style:{flex:1,height:"auto",margin:"8px"}},o.a.createElement(d.Input,{rows:"1",value:f,ref:E,"data-testid":"input",style:{margin:"8px",padding:"".concat(0,"px"),lineHeight:"".concat(20,"px"),height:"".concat(20,"px"),maxHeight:"".concat(80,"px"),resize:"none"},onChange:function(e){return O(e.currentTarget.value)}})),o.a.createElement(u.Fab,{mini:!0,icon:o.a.createElement(c.a,{icon:"send"}),"data-testid":"send",onClick:function(){y(!0);var e=f;O(""),t(f,i).catch((function(){return O(e)}))},style:{margin:"auto",marginRight:"8px",color:"var(--mdc-theme-on-primary, #fff)",background:"var(--mdc-theme-primary, #6200ee)"}})))}function p(e){var t=e.msgList,n=e.autoScroll,i=e.setAutoScroll,s=Object(r.useRef)(null),l=Object(r.useRef)(null),d=t.map((function(e){return o.a.createElement(g,{key:e.id,msg:e})})),m=function(){s.current&&s.current.scrollIntoView&&s.current.scrollIntoView({behavior:"smooth"})};Object(r.useEffect)((function(){n&&m()}));var f=Object(r.useState)(!1),p=Object(a.a)(f,2),v=p[0],h=p[1];return Object(r.useEffect)((function(){n||h(!0)}),[t]),o.a.createElement("div",{className:"teste","data-testid":"msg-list",ref:l,style:{flexGrow:1,overflow:"auto",position:"relative"},onScroll:function(e){var t=e.target.getBoundingClientRect().bottom,n=s.current.previousSibling.getBoundingClientRect().bottom;i(Math.abs(n-t)<20)}},d,o.a.createElement("div",{ref:s}),o.a.createElement(u.Fab,{id:"scroll-down",className:v?"new-msgs":void 0,mini:!0,textLabel:v?"novas mensagens":void 0,exited:n,icon:o.a.createElement(c.a,{icon:"expand_more"}),onClick:function(){m(),h(!1)}}))}function g(e){var t=e.msg;return o.a.createElement(l.a,{outlined:!1,style:{margin:"8px"},"data-testid":"mensagem"},o.a.createElement(s.CardPrimaryContent,{style:{padding:"0px 4px"}},o.a.createElement("div",{"data-testid":"autor",style:{fontWeight:"bold"}},t.autor),o.a.createElement("div",{className:"msg-text","data-testid":"texto"},t.texto)))}},39:function(e,t,n){e.exports=n(40)},40:function(e,t,n){"use strict";n.r(t),function(e){var t=n(26),a=n(11),r=n.n(a),o=n(19),i=n(7),c=n(1),u=n.n(c),s=n(27),l=n.n(s),d=n(4),m=n.n(d),f=n(18),p=n(29),g=n(30),v=(n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72),n(73),n(74),n(75),n(76),n(77),n(78),n(79),n(16)),h=n(9),b=n.n(h),y=n(15),E=n(34),O=n(35),w=n(38);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}try{m.a.app()}catch(I){Object(f.a)()}e.firebase=m.a;var x=m.a.firestore(),k=x.collection("invencoes"),C=m.a.firestore.FieldValue.serverTimestamp();function S(){return(S=Object(o.a)(r.a.mark((function e(t,n){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",Promise.reject("Conecte-se para enviar mensagens"));case 2:if(!((t=t.trim()).length>0)){e.next=7;break}return e.abrupt("return",k.doc("income").collection("msgs").add({texto:t,timestamp:C,autor:n}));case 7:return e.abrupt("return",Promise.resolve());case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(p.a)(),l.a.render(u.a.createElement((function(e){var t=e.sendMsg,n=e.msgsListener,a=e.inventionListener,s=e.inventionSave,l=Object(c.useState)(void 0),d=Object(i.a)(l,2),f=d[0],p=d[1],h=Object(c.useState)("income"),j=Object(i.a)(h,2),k=j[0],C=(j[1],Object(c.useState)(!1)),S=Object(i.a)(C,2),I=S[0],P=S[1];Object(c.useEffect)((function(){var e=void 0;return m.a.auth().onAuthStateChanged((function(t){if(t){var n=function(){var t=Object(o.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.metadata.fromCache){t.next=12;break}if(t.t0=p,t.t1=n.data(),t.t1){t.next=7;break}return t.next=6,a();case 6:t.t1=t.sent;case 7:t.t2=t.t1,(0,t.t0)(t.t2),e(),e=void 0,console.timeEnd("logging");case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),a=function(){var e=Object(o.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={uid:t.uid,nome:t.displayName,papel:"comum"},e.next=3,i.set(n);case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();console.time("logging"),p({uid:t.uid,nome:t.displayName});var i=x.collection("usuarios").doc(t.uid);e=i.onSnapshot({includeMetadataChanges:!0},n)}else p(void 0),e&&(e(),e=void 0),console.log("desconectado"),console.timeEnd("logging")}))}),[]);var L={sendMsg:function(){return f?t.apply(void 0,arguments):(P(!0),Promise.reject("Usu\xe1rio n\xe3o conectado"))},msgsListener:n},R=Object(c.useState)("flex"),_=Object(i.a)(R,2),D=_[0],N=(_[1],Object(c.useState)(window.innerWidth<=840?"none":"flex")),F=Object(i.a)(N,2),M=F[0],H=F[1];return u.a.createElement(E.Body1,{tag:"div"},u.a.createElement(v.Grid,{style:{padding:0}},u.a.createElement(v.Row,{style:{gridGap:"0px"}},u.a.createElement(v.Cell,{id:"incomedocs",className:"vh100",phoneColumns:12,tabletColumns:12,desktopColumns:8,style:{display:D,flexDirection:"column",position:"relative"}},u.a.createElement(O.a,{showHeader:!!f&&"administrador"===f.papel,inventionSave:function(e){return s(e,k,f)},inventionListener:function(e){return a(k,e)}}),u.a.createElement(y.Fab,{id:"fab-chat",icon:u.a.createElement(b.a,{icon:"chat"}),onClick:function(){return H("flex")},textLabel:"Chat",style:{margin:"16px",position:"absolute",bottom:"0px",right:"0px",zIndex:0,color:"var(--mdc-theme-on-primary, #fff)",background:"var(--mdc-theme-primary, #6200ee)"}})),u.a.createElement(v.Cell,{id:"incomechat",className:"vh100",phoneColumns:12,tabletColumns:12,desktopColumns:4,style:{display:M,flexDirection:"column",background:"white",width:"100%"}},u.a.createElement(g.a,{user:f,sign_in:I,open_sign_in:P,hideChat:function(){return H("none")}}),u.a.createElement(w.a,Object.assign({autor:f,alertas:[]},L))))))}),{sendMsg:function(e,t){return S.apply(this,arguments)},msgsListener:function(e){return k.doc("income").collection("msgs").orderBy("timestamp").onSnapshot((function(n){var a=[];n.forEach((function(e){a.push(function(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?j(a,!0).forEach((function(n){Object(t.a)(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.data(),{id:e.id,autor:e.data().autor.nome}))})),e(a)}),(function(e){return console.log(e)}))},inventionListener:function(e,t){return k.doc(e).onSnapshot((function(e){e.data()&&t(e.data().markdown)}),(function(e){return console.log(e)}))},inventionSave:function(e,t,n){return k.doc(t).collection("historico").add({markdown:e,timestamp:C}),k.doc(t).set({markdown:e}).catch((function(e){return Promise.reject(u.a.createElement("div",null,"error"))}))}}),document.querySelector("#root"))}.call(this,n(12))},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){}},[[39,1,2]]]);
//# sourceMappingURL=main.75916df0.chunk.js.map